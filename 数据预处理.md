# 医学影像数据预处理步骤

#### 1. 数据格式转换
- DICOM到NIfTI转换
- 其他格式转换（如JPEG, PNG）

#### 2. 数据清洗
- 去除无效数据
- 填补缺失数据

#### 3. 图像重采样
- 空间分辨率统一
- 像素间距标准化

#### 4. 图像配准
- 同一患者多模态图像对齐
- 跨患者图像对齐

#### 5. 图像裁剪和重尺寸
- ROI（Region of Interest）提取
- 统一图像尺寸

#### 6. 图像归一化和标准化
- 灰度值归一化（0-1之间）
- 标准化到标准分布（减去均值除以标准差）

#### 7. 去噪和增强
- 去噪
  - 高斯滤波
  - 中值滤波
- 数据增强
  - 旋转、平移、缩放
  - 翻转、裁剪
  - 亮度、对比度调整

#### 8. 直方图均衡化
- 提高对比度
- 增强图像细节

#### 9. 边界增强
- 拉普拉斯滤波
- Canny边缘检测

#### 10. 伪影去除
- MRI和CT伪影去除
- 特殊伪影处理

#### 11. HU值标准化（CT图像特有）
- **将CT图像的HU值转换到一个常见范围（例如-1000到400）**

#### 12. 分割前的预处理
- 切片选择
- 标注信息处理


## 读取DICOM文件并转换为NIfTI

```python
import pydicom
import nibabel as nib
import numpy as np
import os

def dicom_to_nifti(dicom_folder, output_file):
    slices = [pydicom.dcmread(os.path.join(dicom_folder, f)) for f in os.listdir(dicom_folder)]
    slices.sort(key=lambda x: int(x.InstanceNumber))
    image_3d = np.stack([s.pixel_array for s in slices])
    affine = np.eye(4)
    nifti_img = nib.Nifti1Image(image_3d, affine)
    nib.save(nifti_img, output_file)

## 图像归一化

def normalize_image(image):
    image = image.astype(np.float32)
    image /= np.max(image)
    return image

